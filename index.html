<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Clay Jones AR Business Card</title>
    <!-- Include A-Frame -->
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
      }
      #startText {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 20px;
        color: #ffffff;
        background-color: rgba(0, 0, 0, 0.7);
        padding: 10px 20px;
        border-radius: 5px;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <!-- Start text overlay -->
    <div id="startText">Touch the screen to start AR</div>

    <!-- A-Frame scene -->
    <a-scene embedded renderer="logarithmicDepthBuffer: true">
      <!-- Lighting -->
      <a-light type="directional" position="0 4 -4" intensity="1"></a-light>

      <!-- Camera with raycasting -->
      <a-camera position="0 1.6 0">
        <a-entity cursor="rayOrigin: mouse" raycaster="objects: .interactive"></a-entity>
      </a-camera>

      <!-- Business Card Model -->
      <a-entity 
        id="businessCard" 
        gltf-model="url(https://raw.githubusercontent.com/clay-creates/WebXR_ARBusinessCard/A-Frame-Build/Models/ARBusinessCard%28with%20buttons%29.glb)" 
        scale="0.3 0.3 0.3" 
        position="0 1.6 -2">
      </a-entity>

      <!-- Interactive Buttons -->
      <a-plane 
        id="GithubIcon" 
        class="interactive" 
        position="-0.5 0 -1" 
        height="0.2" 
        width="0.2" 
        color="#4267B2">
      </a-plane>
      <a-plane 
        id="LinkedInIcon" 
        class="interactive" 
        position="0 0 -1" 
        height="0.2" 
        width="0.2" 
        color="#0077B5">
      </a-plane>
      <a-plane 
        id="GmailIcon" 
        class="interactive" 
        position="0.5 0 -1" 
        height="0.2" 
        width="0.2" 
        color="#D44638">
      </a-plane>
    </a-scene>

    <!-- Script to start AR on user interaction -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const startText = document.getElementById('startText');
        const scene = document.querySelector('a-scene');

        // Start XR experience
        const startXR = () => {
          startText.style.display = 'none'; // Hide prompt

          // Attempt to enter VR mode
          scene.enterVR().then(() => {
            console.log('XR started successfully!');
          }).catch((err) => {
            console.error('Failed to start XR:', err);
            alert('XR could not start. Please ensure your browser supports AR and try again.');
          });
        };

        // Event listeners for interaction
        document.body.addEventListener('click', startXR, { once: true });
        document.body.addEventListener('touchstart', startXR, { once: true });

        // Debugging information
        scene.addEventListener('loaded', () => {
          console.log('Scene loaded successfully.');
        });
        scene.addEventListener('enter-vr', () => {
          console.log('Entered VR mode.');
        });
        scene.addEventListener('exit-vr', () => {
          console.log('Exited VR mode.');
        });
      });
    </script>
  </body>
</html>
